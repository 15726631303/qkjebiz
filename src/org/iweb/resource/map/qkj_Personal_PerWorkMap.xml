<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN"  "sql-map-2.dtd">
<sqlMap>
	<!-- Stock Start -->
	<typeAlias alias="work" type="com.qkj.manage.domain.PerWork" />
	<select id="personal_getPerWorks" resultClass="work" parameterClass="java.util.Map">
		<![CDATA[ 
			select * from ( $sqltext$ ) p
		]]>
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="perUuid"><![CDATA[ p.perUuid=#perUuid# ]]></isNotEmpty>
			<isNotEmpty prepend="AND" property="ptype"><![CDATA[ p.ptype=#ptype# ]]></isNotEmpty>
			<isNotEmpty prepend="AND" property="title"><![CDATA[ p.title=#title# ]]></isNotEmpty>
			<isNotEmpty prepend="AND" property="apply_user_name"><![CDATA[ p.apply_user_name=#apply_user_name# ]]></isNotEmpty>
			<isNotEmpty prepend="AND" property="apply_depts">
				<![CDATA[ p.apply_dept In ]]>
			<iterate property="apply_depts" open="(" close=")" conjunction=" , "> #apply_depts[]#</iterate>
		</isNotEmpty>
		</dynamic>
		<![CDATA[ ORDER BY ptype,perUuid DESC	]]>
	</select>
	<!-- Stock End -->
</sqlMap>